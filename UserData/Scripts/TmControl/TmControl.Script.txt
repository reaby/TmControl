#RequireContext CServerPlugin

#Include "TMControl/App/config.Script.txt" as Config
#Include "TMControl/App/pluginManager.Script.txt" as PluginManager
#Include "TMControl/App/serverManager.Script.txt" as Server

Void DoNothing() {
    
}

/** main
@return Void
*/
main() {
    Config::Init();
    PluginManager::Init();
    
    while (True) {   
             
        foreach (Event in PendingEvents) {            
            declare TempEvent <=> Event;
            PluginManager::HandleEvent(TempEvent);
        }
        
        foreach (UIEvent in UIManager.PendingEvents) {            
            declare TempUiEvent <=> UIEvent;
            PluginManager::HandleUiEvent(TempUiEvent);
        }
        
        foreach (XPEvent in XmlRpc.PendingEvents) {
           // log(XPEvent);
        }
        
        Server::ProcessActions();
        yield;        
    }   
}
